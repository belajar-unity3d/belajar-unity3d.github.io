<!doctype html>
<html lang="en" class="no-js">
 <head> 
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> 
  <script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script> 
  <script type="text/javascript">
					function OptanonWrapper() { }
				</script> 
  <script>var offline=false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-K8K24X8');}</script> 
  <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet"> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <title>Unity - Manual: validasi penerimaan</title> 
  <meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg"> 
  <meta name="author" content="Unity Technologies"> 
  <link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico"> 
  <link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png"> 
  <link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png"> 
  <meta name="msapplication-TileColor" content="#222c37"> 
  <meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png"> 
  <script type="text/javascript" src="https://docs.unity3d.com/StaticFilesConfig/UnityVersionsInfo.js"></script> 
  <script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20220404"></script> 
  <script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20220404"></script> 
  <script type="text/javascript" src="docdata/toc.js?ts=20220404"></script> 
  <script type="text/javascript" src="docdata/global_toc.js?ts=20220404"></script> 
  <link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20220404"> 
  <link rel="stylesheet" href="../StaticFilesManual/css/prism.css"> 
  <script src="../StaticFilesManual/js/prism.js"></script> 
  <script src="/StaticFilesConfig/feedback/feedback.js"></script> 
  <script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script> 
  <link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css"> 
  <script src="../StaticFilesManual/js/mobileoptimisation.js"></script> 
 </head> 
 <body> 
  <noscript> 
   <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8K24X8" height="0" width="0" style="display:none;visibility:hidden"></iframe> 
  </noscript> 
  <div id="DocsAnalyticsData" data-area="monetization" data-pagetype="manual"></div> 
  <div class="header-wrapper"> 
   <div id="header" class="header"> 
    <div class="content"> 
     <div class="spacer"> 
      <div class="menu"> 
       <div id="nav-open" for="nav-input"> 
        <span></span> 
       </div> 
       <div class="logo"></div> 
       <div class="search-form"> 
        <form action="30_search.html" method="get" class="apisearch"> 
         <input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"> 
         <input type="submit" class="submit"> 
        </form> 
       </div> 
       <ul> 
        <li><a href="../Manual/index.html" class="selected">Manual</a></li> 
        <li><a href="../ScriptReference/index.html">API documentation</a></li> 
       </ul> 
      </div> 
     </div> 
     <div class="more"> 
      <div class="filler"></div> 
      <ul> 
       <li></li> 
      </ul> 
     </div> 
    </div> 
   </div> 
   <div class="toolbar"> 
    <div class="content"> 
    </div> 
   </div> 
   <div class="mobileLogo"></div> 
  </div> 
  <div id="master-wrapper" class="master-wrapper clear"> 
   <div id="sidebar" class="sidebar"> 
    <div class="sidebar-wrap"> 
     <div class="content"> 
      <div class="sidebar-menu"> 
       <div class="toc" id="customScrollbar"> 
        <h2>Manual Unity</h2> 
        <div class="search-form sidebar-search-form"> 
         <form action="30_search.html" method="get" class="apisearch"> 
          <input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"> 
          <input type="submit" id="mobileSearchBtn" class="submit" value="Search"> 
         </form> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div id="content-wrap" class="content-wrap"> 
    <div class="content-block"> 
     <div class="content"> 
      <div class="section"> 
       <div class="breadcrumbs clear"> 
        <ul> 
         <li><a href="UnityManual.html"></a></li> 
         <li><a href="UnityServices.html">Layanan Unity</a></li> 
         <li><a href="UnityIAP.html">﻿Unity IAP</a></li> 
         <li>Platform Lintas Login</li> 
         <li>Validasi penerimaan</li> 
        </ul> 
       </div> 
       <div class="mb20"> 
        <div class="nextprev clear"> 
         <div class="icon tt left mr1" data-distance="-40|-30|top"> 
          <span class="prev"><a href="UnityIAPPurchaseReceipts.html"></a></span> 
          <div class="tip">
            Penerimaan Pembelian 
          </div> 
         </div> 
         <div class="icon tt right" data-distance="-40|-30|top"> 
          <span class="next"><a href="UnityIAPStoreExtensions.html"></a></span> 
          <div class="tip">
            Ekstensi Toko 
          </div> 
         </div> 
        </div> 
       </div> 
       <div id="_leavefeedback"></div> 
       <h1>Validasi penerimaan</h1> 
       <!--BeginSwitchLink--> 
       <!--EndSwitchLink--> 
       <div class="clear"></div> 
       <p>Validasi penerimaan membantu Anda mencegah pengguna mengakses konten yang belum dibeli.</p> 
       <h2>Titik validasi</h2> 
       <p>Praktik terbaik untuk memvalidasi tanda terima pada titik di mana konten aplikasi Anda didistribusikan.</p> 
       <ul> 
        <li>Sitemap Untuk konten sisi klien, di mana semua konten terkandung dalam aplikasi dan diaktifkan sekali dibeli, validasi harus terjadi pada perangkat target, tanpa perlu terhubung ke server jarak jauh. Unity IAP dirancang untuk mendukung validasi lokal dalam aplikasi Anda. Lihat <strong>Local validation:</strong> di bawah untuk informasi lebih lanjut.<strong>Local validation</strong> below for more information.</li> 
        <li>Sitemap Untuk konten sisi server, di mana konten diunduh setelah dibeli, validasi harus terjadi pada server sebelum konten dirilis. Unity tidak menawarkan dukungan untuk validasi sisi server; namun, solusi pihak ketiga tersedia, seperti <strong>Remote validation:</strong> Nobuyori Takahashi.<a href="https://github.com/voltrue2/in-app-purchase">Proyek IAP</a>.</li> 
       </ul> 
       <h2>Validasi Lokal</h2> 
       <p> <strong>Important</strong>: Meskipun Unity IAP menyediakan metode validasi lokal, validasi lokal lebih rentan terhadap penipuan. Mengvalidasi server transaksi sensitif di mana mungkin dianggap praktik terbaik. Untuk informasi lebih lanjut, silakan lihat dokumentasi <a href="https://developer.apple.com/documentation/storekit/in-app_purchase/choosing_a_receipt_validation_technique">Apple</a> dan <a href="https://developer.android.com/google/play/billing/security">Android</a> tentang pencegahan penipuan.</p> 
       <p>Jika konten bahwa pengguna sudah membeli ada di perangkat, aplikasi hanya perlu membuat keputusan tentang apakah membukanya.</p> 
       <p>Unity IAP menyediakan alat untuk membantu Anda menyembunyikan konten dan untuk memvalidasi dan mengumpulkan tanda terima melalui Google Play dan toko Apple.</p> 
       <h3>Membatalkan kunci enkripsi</h3> 
       <p>Validasi penerimaan dilakukan menggunakan kunci enkripsi yang diketahui. Untuk aplikasi Anda, ini adalah kunci publik Google Play terenkripsi, dan / atau sertifikat akar Apple.</p> 
       <p>Jika pengguna dapat mengganti ini, mereka dapat mengalahkan cek validasi penerimaan Anda, sehingga penting untuk membuat sulit bagi pengguna untuk dengan mudah menemukan dan memodifikasi kunci ini.</p> 
       <p>Unity IAP menyediakan alat yang dapat membantu Anda menggali kunci enkripsi Anda dalam Aplikasi Anda. Ini membingungkan atau merakit kunci sehingga jauh lebih sulit bagi pengguna untuk mengumpulkannya. Di bar menu Unity, pergi ke <strong>Window</strong> &gt; <span class="tooltip"><strong>Unity IAP</strong><span class="tooltiptext">Unity <strong>In App Purchase</strong><br><span class="tooltipGlossaryLink">Lihat di <a href="Glossary.html#UnityIAP">Glossary</a></span></span></span> &gt; <strong>IAP Receipt Validation Obfuscator</strong>.</p> 
       <figure> 
        <img src="https://docs.unity3d.com/2022.1/Documentation/uploads/Main/IAPObfuscator.png" alt="The Obfuscator window"> 
        <figcaption>
          Jendela Obfuscator 
        </figcaption> 
       </figure> 
       <p>Jendela ini mengkodekan sertifikat akar Apple (yang dibundel dengan Unity IAP) dan kunci publik Google Play Anda (dari halaman <a href="https://developer.android.com/google/play/licensing/setting-up.html">Layanan &amp; API Google Play Developer Console</a> aplikasi) menjadi dua file C # yang berbeda: <strong>AppleTangle</strong> dan <strong>GooglePlayTangle</strong>. Ini ditambahkan ke proyek Anda untuk digunakan di bagian berikutnya.</p> 
       <p>Perhatikan bahwa Anda tidak perlu memberikan kunci publik Google Play jika Anda hanya menargetkan toko Apple, dan sebaliknya.</p> 
       <h3>Validasi tanda terima</h3> 
       <p>Gunakan kelas <code>CrossPlatformValidator</code> untuk validasi di semua toko Google Play dan Apple.</p> 
       <p>Anda harus menyediakan kelas ini dengan baik Login Bermain kunci publik atau sertifikat akar Apple, atau keduanya jika Anda ingin memvalidasi di kedua platform.</p> 
       <p><code>CrossPlatformValidator</code> melakukan dua cek:</p> 
       <ul> 
        <li>Keaslian penerimaan diperiksa melalui validasi tanda tangan.</li> 
        <li>Pengidentifikasi bundel aplikasi pada tanda terima dibandingkan dengan satu dalam aplikasi Anda. Pengecualian <strong>InvalidBundleId</strong> dibuang jika tidak cocok.</li> 
       </ul> 
       <p>Perhatikan bahwa validator hanya memvalidasi tanda terima yang dihasilkan pada platform Google Play dan Apple. Penerimaan yang dihasilkan pada platform lain, termasuk palsu yang dihasilkan dalam Editor, membuang <strong>IAPSecurityException</strong>.</p> 
       <p>Jika Anda mencoba untuk memvalidasi tanda terima untuk platform yang belum Anda berikan kunci rahasia untuk, <strong>MissingStoreSecretException</strong> dibuang.</p> 
       <pre><code>public PurchaseProcessingResult ProcessPurchase (PurchaseEventArgs e)
{
    bool validPurchase = true; // Presume valid for platforms with no R.V.

    // Unity IAP's validation logic is only included on these platforms.
#if UNITY_ANDROID || UNITY_IOS || UNITY_STANDALONE_OSX
    // Prepare the validator with the secrets we prepared in the Editor
    // obfuscation window.
    var validator = new CrossPlatformValidator(GooglePlayTangle.Data(),
        AppleTangle.Data(), Application.bundleIdentifier);

    try {
        // On Google Play, result has a single product ID.
        // On Apple stores, receipts contain multiple products.
        var result = validator.Validate(e.purchasedProduct.receipt);
        // For informational purposes, we list the receipt(s)
        Debug.Log("Receipt is valid. Contents:");
        foreach (IPurchaseReceipt productReceipt in result) {
            Debug.Log(productReceipt.productID);
            Debug.Log(productReceipt.purchaseDate);
            Debug.Log(productReceipt.transactionID);
        }
    } catch (IAPSecurityException) {
        Debug.Log("Invalid receipt, not unlocking content");
        validPurchase = false;
    }
#endif

    if (validPurchase) {
        // Unlock the appropriate content here.
    }

    return PurchaseProcessingResult.Complete;
}

</code></pre> 
       <p>Penting untuk Anda periksa tidak hanya bahwa tanda terima valid, tetapi juga informasi apa yang mengandung. Teknik umum oleh pengguna yang mencoba mengakses konten tanpa pembelian adalah untuk memasok penerimaan dari produk atau aplikasi lainnya. Penerimaan ini asli dan melakukan validasi lulus, sehingga Anda harus membuat keputusan berdasarkan ID produk yang diserang oleh <strong>CrossPlatformValidator</strong>.</p> 
       <h3>Rincian spesifik toko</h3> 
       <p>Toko yang berbeda memiliki bidang yang berbeda dalam tanda terima pembelian mereka. Untuk mengakses bidang spesifik toko, <code>IPurchaseReceipt</code> dapat downcast ke dua subtipe yang berbeda: <code>GooglePlayReceipt</code> dan <code>AppleInAppPurchaseReceipt</code>.</p> 
       <pre><code>var result = validator.Validate(e.purchasedProduct.receipt);
Debug.Log("Receipt is valid. Contents:");
foreach (IPurchaseReceipt productReceipt in result) {
    Debug.Log(productReceipt.productID);
    Debug.Log(productReceipt.purchaseDate);
    Debug.Log(productReceipt.transactionID);

    GooglePlayReceipt google = productReceipt as GooglePlayReceipt;
    if (null != google) {
        // This is Google's Order ID.
        // Note that it is null when testing in the sandbox
        // because Google's sandbox does not provide Order IDs.
        Debug.Log(google.transactionID);
        Debug.Log(google.purchaseState);
        Debug.Log(google.purchaseToken);
    }

    AppleInAppPurchaseReceipt apple = productReceipt as AppleInAppPurchaseReceipt;
    if (null != apple) {
        Debug.Log(apple.originalTransactionIdentifier);
        Debug.Log(apple.subscriptionExpirationDate);
        Debug.Log(apple.cancellationDate);
        Debug.Log(apple.quantity);
    }
}
</code></pre> 
       <h3>Login Penerimaan apel</h3> 
       <p>Gunakan kelas <code>AppleValidator</code> untuk mengekstrak informasi rinci tentang tanda terima Apple. Perhatikan bahwa kelas ini hanya bekerja dengan tanda terima aplikasi iOS dari versi 7.0 di atasnya, bukan tanda terima transaksi yang telah ditentukan Apple.</p> 
       <pre><code>#if UNITY_ANDROID || UNITY_IOS || UNITY_STANDALONE_OSX
var builder = ConfigurationBuilder.Instance(StandardPurchasingModule.Instance());
// Get a reference to IAppleConfiguration during IAP initialization.
var appleConfig = builder.Configure&lt;IAppleConfiguration&gt;();
var receiptData = System.Convert.FromBase64String(appleConfig.appReceipt);
AppleReceipt receipt = new AppleValidator(AppleTangle.Data()).Validate(receiptData);

Debug.Log(receipt.bundleID);
Debug.Log(receipt.receiptCreationDate);
foreach (AppleInAppPurchaseReceipt productReceipt in receipt.inAppPurchaseReceipts) {
    Debug.Log(productReceipt.transactionIdentifier);
    Debug.Log(productReceipt.productIdentifier);
}
#endif
</code></pre> 
       <p>Model tipe <code>AppleReceipt</code> format penerimaan ASN1 Apple. Lihat <a href="https://developer.apple.com/library/ios/releasenotes/General/ValidateAppStoreReceipt/Chapters/ReceiptFields.html#/apple_ref/doc/uid/TP40010573-CH106-SW1">Dokumentasi Apple</a> untuk penjelasan bidangnya.</p> 
       <!-- area:monetization --> 
       <div id="_content"></div> 
       <div class="nextprev clear"> 
        <div class="icon tt left mr1" data-distance="-40|-30|top"> 
         <span class="prev"><a href="UnityIAPPurchaseReceipts.html"></a></span> 
         <div class="tip">
           Penerimaan Pembelian 
         </div> 
        </div> 
        <div class="icon tt right" data-distance="-40|-30|top"> 
         <span class="next"><a href="UnityIAPStoreExtensions.html"></a></span> 
         <div class="tip">
           Ekstensi Toko 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="footer-wrapper"> 
       <div class="footer clear"> 
        <div class="copy">
          © 2022 Unity Technologies. Tanggal Publikasi: 2022-04-04. 
        </div> 
        <div class="menu"> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div>  
 </body>
</html>