<!doctype html>
<html lang="en" class="no-js">
 <head> 
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> 
  <script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script> 
  <script type="text/javascript">
					function OptanonWrapper() { }
				</script> 
  <script>var offline=false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-K8K24X8');}</script> 
  <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet"> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <title>Unity - Manual: Sinkronisasi Negara Lanjutan</title> 
  <meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg"> 
  <meta name="author" content="Unity Technologies"> 
  <link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico"> 
  <link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png"> 
  <link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png"> 
  <meta name="msapplication-TileColor" content="#222c37"> 
  <meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png"> 
  <script type="text/javascript" src="https://docs.unity3d.com/StaticFilesConfig/UnityVersionsInfo.js"></script> 
  <script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20220404"></script> 
  <script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20220404"></script> 
  <script type="text/javascript" src="docdata/toc.js?ts=20220404"></script> 
  <script type="text/javascript" src="docdata/global_toc.js?ts=20220404"></script> 
  <link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20220404"> 
  <link rel="stylesheet" href="../StaticFilesManual/css/prism.css"> 
  <script src="../StaticFilesManual/js/prism.js"></script> 
  <script src="/StaticFilesConfig/feedback/feedback.js"></script> 
  <script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script> 
  <link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css"> 
  <script src="../StaticFilesManual/js/mobileoptimisation.js"></script> 
 </head> 
 <body> 
  <noscript> 
   <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8K24X8" height="0" width="0" style="display:none;visibility:hidden"></iframe> 
  </noscript> 
  <div id="DocsAnalyticsData" data-area="cloud" data-pagetype="manual"></div> 
  <div class="header-wrapper"> 
   <div id="header" class="header"> 
    <div class="content"> 
     <div class="spacer"> 
      <div class="menu"> 
       <div id="nav-open" for="nav-input"> 
        <span></span> 
       </div> 
       <div class="logo"></div> 
       <div class="search-form"> 
        <form action="30_search.html" method="get" class="apisearch"> 
         <input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"> 
         <input type="submit" class="submit"> 
        </form> 
       </div> 
       <ul> 
        <li><a href="../Manual/index.html" class="selected">Manual</a></li> 
        <li><a href="../ScriptReference/index.html">API documentation</a></li> 
       </ul> 
      </div> 
     </div> 
     <div class="more"> 
      <div class="filler"></div> 
      <ul> 
       <li></li> 
      </ul> 
     </div> 
    </div> 
   </div> 
   <div class="toolbar"> 
    <div class="content"> 
    </div> 
   </div> 
   <div class="mobileLogo"></div> 
  </div> 
  <div id="master-wrapper" class="master-wrapper clear"> 
   <div id="sidebar" class="sidebar"> 
    <div class="sidebar-wrap"> 
     <div class="content"> 
      <div class="sidebar-menu"> 
       <div class="toc" id="customScrollbar"> 
        <h2>Manual Unity</h2> 
        <div class="search-form sidebar-search-form"> 
         <form action="30_search.html" method="get" class="apisearch"> 
          <input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"> 
          <input type="submit" id="mobileSearchBtn" class="submit" value="Search"> 
         </form> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div id="content-wrap" class="content-wrap"> 
    <div class="content-block"> 
     <div class="content"> 
      <div class="section"> 
       <div class="breadcrumbs clear"> 
        <ul> 
         <li><a href="UnityManual.html"></a></li> 
         <li><a href="UNet.html">Multiplayer dan Jaringan</a></li> 
         <li><a href="UNetUsingHLAPI.html">Multiplayer API</a></li> 
         <li><a href="UNetGameObjects.html">Bookmark the permalink.</a></li> 
         <li>Sinkronisasi Negara Tingkat Lanjut</li> 
        </ul> 
       </div> 
       <div class="mb20"> 
        <div class="nextprev clear"> 
         <div class="icon tt left mr1" data-distance="-40|-30|top"> 
          <span class="prev"><a href="UNetStateSync.html"></a></span> 
          <div class="tip">
            Sinchronisasi negara 
          </div> 
         </div> 
         <div class="icon tt right" data-distance="-40|-30|top"> 
          <span class="next"><a href="UNetVisibility.html"></a></span> 
          <div class="tip">
            visibilitas jaringan 
          </div> 
         </div> 
        </div> 
       </div> 
       <div id="_leavefeedback"></div> 
       <h1>Sinkronisasi Negara Tingkat Lanjut</h1> 
       <!--BeginSwitchLink--> 
       <!--EndSwitchLink--> 
       <div class="clear"></div> 
       <table> 
        <colgroup> 
         <col style="text-align:left;"> 
        </colgroup> 
        <thead> 
         <tr> 
          <th style="text-align:left;"></th> 
         </tr> 
        </thead> 
        <tbody> 
         <tr> 
          <td style="text-align:left;"> <strong>Important</strong>: UNet adalah solusi yang diuraikan, dan Solusi Multiplayer baru dan <span class="tooltip"><strong>Networking</strong><span class="tooltiptext">Sistem Unity yang memungkinkan game multiplayer di jaringan komputer. <a class="tooltipMoreInfoLink" href="UNetOverview.html">More info</a><br><span class="tooltipGlossaryLink">Lihat di <a href="Glossary.html#Networking">Glossary</a></span></span></span> (Netcode untuk GameObjects) sedang berkembang. Untuk informasi lebih lanjut dan langkah selanjutnya melihat informasi di .</td> 
         </tr> 
        </tbody> 
       </table> 
       <p>Dalam kebanyakan kasus, penggunaan SyncVars cukup untuk permainan Anda <span class="tooltip"><strong>scripts</strong><span class="tooltiptext">Sepotong kode yang memungkinkan Anda untuk membuat Komponen Anda sendiri, memicu peristiwa permainan, memodifikasi sifat komponen dari waktu ke waktu dan menanggapi input pengguna dengan cara apa pun yang Anda sukai. <a class="tooltipMoreInfoLink" href="CreatingAndUsingScripts.html">More info</a><br><span class="tooltipGlossaryLink">Lihat di <a href="Glossary.html#Scripts">Glossary</a></span></span></span> untuk serialisasi keadaan mereka kepada klien. Namun dalam beberapa kasus Anda mungkin memerlukan kode serialisasi yang lebih kompleks. Halaman ini hanya relevan untuk pengembang canggih yang membutuhkan solusi sinkronisasi yang disesuaikan yang melampaui fitur Sinkronisasi normal Unity.</p> 
       <h2><strong>Custom Serialization Functions</strong></h2> 
       <p>Untuk melakukan serialisasi kustom Anda sendiri, Anda dapat menerapkan fungsi virtual pada NetworkBehaviour untuk digunakan untuk serialisasi SyncVar. Fungsi ini adalah:</p> 
       <pre><code>
public virtual bool OnSerialize(NetworkWriter writer, bool initialState);

</code></pre> 
       <pre><code>public virtual void OnDeSerialize(NetworkReader reader, bool initialState);
</code></pre> 
       <p>Gunakan bendera <code>initialState</code> untuk membedakan antara pertama kalinya <span class="tooltip"><strong>GameObject</strong><span class="tooltiptext">Objek mendasar dalam adegan Unity, yang dapat mewakili karakter, props, pemandangan, kamera, waypoints, dan banyak lagi. Fungsi GameObject didefinisikan oleh Komponen yang melekat padanya. <a class="tooltipMoreInfoLink" href="class-GameObject.html">More info</a><br><span class="tooltipGlossaryLink">Lihat di <a href="Glossary.html#GameObject">Glossary</a></span></span></span> serialisasi dan ketika pembaruan inkremental dapat dikirim. Pertama kali GameObject dikirim ke klien, itu harus mencakup snapshot negara penuh, tetapi pembaruan berikutnya dapat menghemat bandwidth dengan hanya perubahan inkremental. Perhatikan bahwa fungsi hook SyncVar tidak disebut ketika <code>initialState</code> benar; mereka hanya disebut untuk pembaruan inkremental.</p> 
       <p>Jika kelas memiliki SyncVars, maka implementasi fungsi ini ditambahkan secara otomatis ke kelas, berarti bahwa kelas yang memiliki SyncVars juga tidak dapat memiliki fungsi serialisasi khusus.</p> 
       <p>Fungsi <code>OnSerialize</code> harus kembali benar untuk menunjukkan bahwa pembaruan harus dikirim. Jika kembali benar, mata kotor untuk skrip itu diatur ke nol. Jika kembali palsu, mata kotor tidak berubah. Ini memungkinkan beberapa perubahan pada skrip untuk terakumulasi dari waktu ke waktu dan dikirim ketika sistem siap, bukan setiap bingkai.</p> 
       <h2><strong>Serialization Flow</strong></h2> 
       <p>GameObjects dengan komponen Identitas Jaringan terpasang dapat memiliki beberapa skrip yang berasal dari <code>NetworkBehaviour</code>. Aliran untuk serialisasi GameObjects ini adalah:</p> 
       <p>Di server:</p> 
       <ul> 
        <li><p>Setiap <code>NetworkBehaviour</code> memiliki masker kotor. Masker ini tersedia dalam <code>OnSerialize</code> sebagai <code>syncVarDirtyBits</code> </p></li> 
        <li><p>Setiap SyncVar dalam script <code>NetworkBehaviour</code> ditugaskan sedikit dalam masker kotor.</p></li> 
        <li><p>Mengubah nilai SyncVars menyebabkan bit untuk SyncVar untuk diatur dalam masker kotor</p></li> 
        <li><p>Atau, memanggil <code>SetDirtyBit()</code> menulis langsung ke masker kotor</p></li> 
        <li><p><span class="tooltip"><strong>NetworkIdentity</strong><span class="tooltiptext">Komponen Jaringan yang memungkinkan Anda untuk menetapkan identitas ke GameObject Anda untuk jaringan untuk mengenalinya sebagai GameObject Pemain Lokal atau Server Hanya GameObject. <a class="tooltipMoreInfoLink" href="class-NetworkIdentity.html">More info</a><br><span class="tooltipGlossaryLink">Lihat di <a href="Glossary.html#NetworkIdentity">Glossary</a></span></span></span> GameObjects are checked on the server as part of itâ€™s update loop</p></li> 
        <li><p>Jika ada <code>NetworkBehaviours</code> pada <code>NetworkIdentity</code> kotor, maka paket <code>UpdateVars</code> diciptakan untuk GameObject</p></li> 
        <li><p>Paket <code>UpdateVars</code> diisi dengan memanggil <code>OnSerialize</code> pada setiap <code>NetworkBehaviour</code> pada GameObject</p></li> 
        <li><p> <code>NetworkBehaviours</code> yang tidak kotor menulis nol ke paket untuk bit kotor mereka</p></li> 
        <li><p> <code>NetworkBehaviours</code> yang kotor menulis masker kotor mereka, maka nilai-nilai untuk SyncVars yang telah berubah</p></li> 
        <li><p>Jika <code>OnSerialize</code> kembali benar untuk <code>NetworkBehaviour</code>, masker kotor diatur untuk <code>NetworkBehaviour</code>, sehingga tidak mengirim lagi sampai perubahan nilainya.</p></li> 
        <li><p>Paket <code>UpdateVars</code> dikirim ke klien siap yang mengamati GameObject</p></li> 
       </ul> 
       <p>Di klien:</p> 
       <ul> 
        <li><p><code>UpdateVars packet</code> diterima untuk GameObject</p></li> 
        <li><p>Fungsi <code>OnDeserialize</code> disebut untuk setiap skrip <code>NetworkBehaviour</code> pada GameObject</p></li> 
        <li><p>Setiap skrip <code>NetworkBehaviour</code> pada GameObject membaca masker kotor.</p></li> 
        <li><p>Jika masker kotor untuk <code>NetworkBehaviour</code> adalah nol, fungsi <code>OnDeserialize</code> kembali tanpa membaca lebih</p></li> 
        <li><p>Jika masker kotor adalah nilai non-zero, maka fungsi <code>OnDeserialize</code> membaca nilai-nilai untuk SyncVars yang sesuai dengan bit kotor yang ditetapkan</p></li> 
        <li><p>Jika ada fungsi hook SyncVar, mereka diinjak dengan nilai yang dibaca dari aliran.</p></li> 
       </ul> 
       <p>Jadi untuk script ini:</p> 
       <pre><code>
public class data : NetworkBehaviour
{

    [SyncVar]
    public int int1 = 66;

    [SyncVar]
    public int int2 = 23487;

    [SyncVar]
    public string MyString = "Example string";
}

</code></pre> 
       <p>Sampel kode berikut menunjukkan fungsi <code>OnSerialize</code> yang dihasilkan:</p> 
       <pre><code>
public override bool OnSerialize(NetworkWriter writer, bool forceAll)
{
    if (forceAll)
    {
        // The first time a GameObject is sent to a client, send all the data (and no dirty bits)
        writer.WritePackedUInt32((uint)this.int1);
        writer.WritePackedUInt32((uint)this.int2);
        writer.Write(this.MyString);
        return true;
    }
    bool wroteSyncVar = false;
    if ((base.get_syncVarDirtyBits() &amp; 1u) != 0u)
    {
        if (!wroteSyncVar)
        {
            // Write dirty bits if this is the first SyncVar written
            writer.WritePackedUInt32(base.get_syncVarDirtyBits());
            wroteSyncVar = true;
        }
        writer.WritePackedUInt32((uint)this.int1);
    }
    if ((base.get_syncVarDirtyBits() &amp; 2u) != 0u)
    {
        if (!wroteSyncVar)
        {
            // Write dirty bits if this is the first SyncVar written
            writer.WritePackedUInt32(base.get_syncVarDirtyBits());
            wroteSyncVar = true;
        }
        writer.WritePackedUInt32((uint)this.int2);
    }
    if ((base.get_syncVarDirtyBits() &amp; 4u) != 0u)
    {
        if (!wroteSyncVar)
        {
            // Write dirty bits if this is the first SyncVar written
            writer.WritePackedUInt32(base.get_syncVarDirtyBits());
            wroteSyncVar = true;
        }
        writer.Write(this.MyString);
    }

    if (!wroteSyncVar)
    {
        // Write zero dirty bits if no SyncVars were written
        writer.WritePackedUInt32(0);
    }
    return wroteSyncVar;
}
</code></pre> 
       <p>Sampel kode berikut menunjukkan fungsi <code>OnDeserialize</code>:</p> 
       <pre><code>
public override void OnDeserialize(NetworkReader reader, bool initialState)
{
    if (initialState)
    {
        this.int1 = (int)reader.ReadPackedUInt32();
        this.int2 = (int)reader.ReadPackedUInt32();
        this.MyString = reader.ReadString();
        return;
    }
    int num = (int)reader.ReadPackedUInt32();
    if ((num &amp; 1) != 0)
    {
        this.int1 = (int)reader.ReadPackedUInt32();
    }
    if ((num &amp; 2) != 0)
    {
        this.int2 = (int)reader.ReadPackedUInt32();
    }
    if ((num &amp; 4) != 0)
    {
        this.MyString = reader.ReadString();
    }
}
</code></pre> 
       <p>Jika seorang <code>NetworkBehaviour</code> memiliki kelas dasar yang juga memiliki fungsi serialisasi, fungsi kelas dasar juga harus disebut.</p> 
       <p>Perhatikan bahwa paket <code>UpdateVar</code> yang dibuat untuk pembaruan state GameObject dapat diatur dalam buffer sebelum dikirim ke klien, sehingga paket lapisan transportasi tunggal dapat berisi pembaruan untuk beberapa GameObjects.</p> 
       <!-- area:cloud --> 
       <div id="_content"></div> 
       <div class="nextprev clear"> 
        <div class="icon tt left mr1" data-distance="-40|-30|top"> 
         <span class="prev"><a href="UNetStateSync.html"></a></span> 
         <div class="tip">
           Sinchronisasi negara 
         </div> 
        </div> 
        <div class="icon tt right" data-distance="-40|-30|top"> 
         <span class="next"><a href="UNetVisibility.html"></a></span> 
         <div class="tip">
           visibilitas jaringan 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="footer-wrapper"> 
       <div class="footer clear"> 
        <div class="copy"> 
        </div> 
        <div class="menu"> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div>  
 </body>
</html>