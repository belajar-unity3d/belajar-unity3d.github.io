<!doctype html>
<html lang="en" class="no-js">
 <head> 
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> 
  <script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script> 
  <script type="text/javascript">
					function OptanonWrapper() { }
				</script> 
  <script>var offline=false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-K8K24X8');}</script> 
  <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet"> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <title>Unity - Manual: Migrasi Host</title> 
  <meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg"> 
  <meta name="author" content="Unity Technologies"> 
  <link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico"> 
  <link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png"> 
  <link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png"> 
  <meta name="msapplication-TileColor" content="#222c37"> 
  <meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png"> 
  <script type="text/javascript" src="https://docs.unity3d.com/StaticFilesConfig/UnityVersionsInfo.js"></script> 
  <script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20220404"></script> 
  <script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20220404"></script> 
  <script type="text/javascript" src="docdata/toc.js?ts=20220404"></script> 
  <script type="text/javascript" src="docdata/global_toc.js?ts=20220404"></script> 
  <link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20220404"> 
  <link rel="stylesheet" href="../StaticFilesManual/css/prism.css"> 
  <script src="../StaticFilesManual/js/prism.js"></script> 
  <script src="/StaticFilesConfig/feedback/feedback.js"></script> 
  <script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script> 
  <link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css"> 
  <script src="../StaticFilesManual/js/mobileoptimisation.js"></script> 
 </head> 
 <body> 
  <noscript> 
   <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8K24X8" height="0" width="0" style="display:none;visibility:hidden"></iframe> 
  </noscript> 
  <div id="DocsAnalyticsData" data-area="cloud" data-pagetype="manual"></div> 
  <div class="header-wrapper"> 
   <div id="header" class="header"> 
    <div class="content"> 
     <div class="spacer"> 
      <div class="menu"> 
       <div id="nav-open" for="nav-input"> 
        <span></span> 
       </div> 
       <div class="logo"></div> 
       <div class="search-form"> 
        <form action="30_search.html" method="get" class="apisearch"> 
         <input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"> 
         <input type="submit" class="submit"> 
        </form> 
       </div> 
       <ul> 
        <li><a href="../Manual/index.html" class="selected">Manual</a></li> 
        <li><a href="../ScriptReference/index.html">API documentation</a></li> 
       </ul> 
      </div> 
     </div> 
     <div class="more"> 
      <div class="filler"></div> 
      <ul> 
       <li></li> 
      </ul> 
     </div> 
    </div> 
   </div> 
   <div class="toolbar"> 
    <div class="content"> 
    </div> 
   </div> 
   <div class="mobileLogo"></div> 
  </div> 
  <div id="master-wrapper" class="master-wrapper clear"> 
   <div id="sidebar" class="sidebar"> 
    <div class="sidebar-wrap"> 
     <div class="content"> 
      <div class="sidebar-menu"> 
       <div class="toc" id="customScrollbar"> 
        <h2>Manual Unity</h2> 
        <div class="search-form sidebar-search-form"> 
         <form action="30_search.html" method="get" class="apisearch"> 
          <input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"> 
          <input type="submit" id="mobileSearchBtn" class="submit" value="Search"> 
         </form> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div id="content-wrap" class="content-wrap"> 
    <div class="content-block"> 
     <div class="content"> 
      <div class="section"> 
       <div class="breadcrumbs clear"> 
        <ul> 
         <li><a href="UnityManual.html"></a></li> 
         <li><a href="UNet.html">Multiplayer dan Jaringan</a></li> 
         <li><a href="UNetUsingHLAPI.html">Multiplayer API</a></li> 
         <li><a href="UNetDealingWithClientsServers.html">Berurusan dengan klien dan server</a></li> 
         <li>Migrasi Host</li> 
        </ul> 
       </div> 
       <div class="mb20"> 
        <div class="nextprev clear"> 
         <div class="icon tt left mr1" data-distance="-40|-30|top"> 
          <span class="prev"><a href="UNetClientServer.html"></a></span> 
          <div class="tip">
            Klien dan server jaringan 
          </div> 
         </div> 
         <div class="icon tt right" data-distance="-40|-30|top"> 
          <span class="next"><a href="UNetDiscovery.html"></a></span> 
          <div class="tip">
            Jaringan Discovery 
          </div> 
         </div> 
        </div> 
       </div> 
       <div id="_leavefeedback"></div> 
       <h1>Migrasi Host</h1> 
       <!--BeginSwitchLink--> 
       <!--EndSwitchLink--> 
       <div class="clear"></div> 
       <table> 
        <colgroup> 
         <col style="text-align:left;"> 
        </colgroup> 
        <thead> 
         <tr> 
          <th style="text-align:left;"></th> 
         </tr> 
        </thead> 
        <tbody> 
         <tr> 
          <td style="text-align:left;"> <strong>Important</strong>: UNet adalah solusi yang diuraikan, dan Solusi Multiplayer baru dan <span class="tooltip"><strong>Networking</strong><span class="tooltiptext">Sistem Unity yang memungkinkan game multiplayer di jaringan komputer. <a class="tooltipMoreInfoLink" href="UNetOverview.html">More info</a><br><span class="tooltipGlossaryLink">Lihat di <a href="Glossary.html#Networking">Glossary</a></span></span></span> (Netcode untuk GameObjects) sedang berkembang. Untuk informasi lebih lanjut dan langkah selanjutnya melihat informasi di .</td> 
         </tr> 
        </tbody> 
       </table> 
       <p>Dalam permainan jaringan multiplayer tanpa server khusus, salah satu contoh permainan bertindak sebagai tuan rumah - pusat otoritas untuk permainan. Ini adalah pemain yang permainannya bertindak sebagai server dan "klien lokal", sementara pemain lain masing-masing menjalankan "klien jarak jauh". Lihat dokumentasi tentang <a href="UNetConcepts.html">konsep sistem jaringan</a> untuk informasi lebih lanjut.</p> 
       <p>Jika host memutuskan dari permainan, gameplay tidak bisa melanjutkan. Alasan umum untuk host untuk memutuskan termasuk pemain host yang meninggalkan, proses host crash, mesin host mematikan, atau koneksi jaringan host kehilangan.</p> 
       <p>Fitur <strong>host migration</strong> memungkinkan salah satu klien jarak jauh untuk menjadi host baru, sehingga permainan multiplayer dapat terus.</p> 
       <h2>How it works</h2> 
       <p>Selama permainan multiplayer dengan migrasi host diaktifkan, Unity mendistribusikan alamat semua peers (pemain, termasuk tuan rumah dan semua klien) untuk semua rekan lain dalam permainan. Ketika host memutuskan, satu peer menjadi host baru. Peers lain kemudian terhubung ke host baru, dan permainan terus.</p> 
       <p>Komponen Jaringan Migrasi Manager menggunakan Jaringan Unity HLAPI. Ini memungkinkan permainan untuk melanjutkan dengan host baru setelah pemutusan host asli. screenshot di bawah ini menunjukkan keadaan migrasi yang ditampilkan di Manajer Migrasi Jaringan, di jendela <span class="tooltip"><strong>Inspector</strong><span class="tooltiptext">Jendela Unity yang menampilkan informasi tentang Pengaturan GameObject yang dipilih saat ini, aset atau proyek, memungkinkan Anda untuk memeriksa dan mengedit nilai. <a class="tooltipMoreInfoLink" href="UsingTheInspector.html">More info</a><br><span class="tooltipGlossaryLink">Lihat di <a href="Glossary.html#Inspector">Glossary</a></span></span></span>.</p> 
       <figure> 
        <img src="https://docs.unity3d.com/2022.1/Documentation/uploads/Main/NetworkMigrationManagerInspector.png" alt="The Network Migration Manager component"> 
        <figcaption>
          Komponen Jaringan Migrasi Manager 
        </figcaption> 
       </figure> 
       <p>Jaringan Migrasi Manager menyediakan antarmuka pengguna dasar, mirip dengan <a href="UNetManager.html">Jaringan Manajer HUD</a>. Antarmuka pengguna ini adalah untuk pengujian dan prototyping selama pengembangan game; sebelum Anda melepaskan permainan Anda harus menerapkan antarmuka pengguna kustom untuk migrasi host, dan logika kustom untuk tindakan seperti memilih host baru secara otomatis tanpa memerlukan masukan dari pengguna.</p> 
       <figure> 
        <img src="https://docs.unity3d.com/2022.1/Documentation/uploads/Main/NetworkMigrationManagerHUD.png" alt="The Network Migration Manager prototyping HUD"> 
        <figcaption>
          Jaringan Migrasi Manager prototyping HUD 
        </figcaption> 
       </figure> 
       <p>Meskipun migrasi mungkin terjadi karena host lama kehilangan koneksi atau berhenti permainan, dimungkinkan untuk tuan rumah lama dari permainan untuk mengajoin permainan sebagai klien di host baru.</p> 
       <p>Selama migrasi host, Unity mempertahankan keadaan dan pada semua <span class="tooltip"><strong>GameObjects</strong><span class="tooltiptext">Objek mendasar dalam adegan Unity, yang dapat mewakili karakter, props, pemandangan, kamera, waypoints, dan banyak lagi. Fungsi GameObject didefinisikan oleh Komponen yang melekat padanya. <a href="class-GameObject.html">More info</a><br><span class="tooltipGlossaryLink">Lihat di <a class="tooltipMoreInfoLink" href="Glossary.html#GameObject">Glossary</a></span></span></span> jaringan di <span class="tooltip"><strong>Scene</strong><span class="tooltiptext">Adegan berisi lingkungan dan menu permainan Anda. Pikirkan setiap file Adegan unik sebagai tingkat yang unik. Di setiap Adegan, Anda menempatkan lingkungan, hambatan, dan dekorasi, pada dasarnya merancang dan membangun permainan Anda dalam potongan-potongan. <a href="CreatingScenes.html">More info</a><br><span class="tooltipGlossaryLink">Lihat di <a href="Glossary.html#Scene">Glossary</a></span></span></span>. Ini juga berlaku untuk data serialisasi kustom untuk GameObjects.</p> 
       <p>Unity menonaktifkan semua pemain GameObjects dalam permainan ketika host memutuskan. Kemudian, ketika klien lain melihat permainan baru di host baru, pemain yang sesuai Unit dapat digunakan kembali klien-klien di host baru, dan memijat mereka di klien lain. Ini memastikan bahwa Unity tidak kehilangan data state pemain selama migrasi host.</p> 
       <p>CATATAN: Selama migrasi host, Unity hanya menyimpan data yang tersedia untuk klien. Jika data hanya pada server, maka tidak tersedia untuk klien yang menjadi host baru. Data pada host hanya tersedia setelah migrasi host jika di SyncVars atau SyncLists.</p> 
       <p>Ketika klien menjadi host baru, Unity memanggil fungsi callback <a href="../ScriptReference/Networking.NetworkBehaviour.OnStartServer.html">OnStartServer</a> untuk semua GameObject jaringan. Pada host baru, Manajer Migrasi Jaringan menggunakan fungsi <a href="../ScriptReference/Networking.NetworkMigrationManager.BecomeNewHost.html">BecomeNewHost</a> untuk membangun adegan server jaringan dari keadaan di <a href="../ScriptReference/Networking.ClientScene.html">ClientScene</a> saat ini.</p> 
       <p>Dalam permainan dengan migrasi host diaktifkan, peers diidentifikasi oleh <a href="../ScriptReference/Networking.NetworkSystem.PeerInfoMessage-connectionId.html">Login Login</a> mereka di server. Ketika klien terhubung kembali ke host baru dari permainan, Unity melewati koneksi ini Id ke host baru sehingga dapat mencocokkan klien ini dengan klien yang terhubung ke host lama. Id ini adalah pada <code>ClientScene</code> sebagai <a href="../ScriptReference/Networking.ClientScene-reconnectId.html">Login Login</a>.</p> 
       <h2>Non-Player GameObjects</h2> 
       <p>Non-player GameObjects dengan otoritas klien juga ditangani oleh migrasi host. Unity menonaktifkan dan re-enables klien-dimiliki non-player GameObjects dengan cara yang sama itu menonaktifkan dan pemain kembali GameObjects.</p> 
       <h2>Mengidentifikasi Peers</h2> 
       <p>Sebelum pemutusan host, semua peer terhubung ke host. Mereka masing-masing memiliki koneksi yang unik Id di host - ini disebut <a href="../ScriptReference/Networking.NetworkSystem.ReconnectMessage-oldConnectionId.html">Login Login</a> dalam konteks migrasi host.</p> 
       <p>Ketika Jaringan Migrasi Manager memilih host baru, dan rekan-rekan untuk itu, mereka menyediakan <code>oldConnectionId</code> mereka untuk mengidentifikasi peer mana mereka. Ini memungkinkan host baru untuk mencocokkan klien yang menghubungkan kembali ini ke GameObject pemain yang sesuai.</p> 
       <p>Host lama menggunakan <code>oldConnectionId</code> khusus dari nol untuk menghubungkan kembali - karena tidak memiliki koneksi ke host lama, itu WAS host lama. Ada <a href="../ScriptReference/Networking.ClientScene.ReconnectIdHost.html">ClientScene.ReconnectIdHost</a> konstan untuk ini.</p> 
       <p>Ketika Anda menggunakan antarmuka pengguna built-in Jaringan Migrasi Manager, Manajer Migrasi Jaringan menetapkan <code>oldConnectionId</code> secara otomatis. Untuk mengaturnya secara manual, gunakan <a href="../ScriptReference/Networking.NetworkMigrationManager.Reset.html">Login Login Sitemap</a> atau <a href="../ScriptReference/Networking.ClientScene.SetReconnectId.html">ClientScene.SetReconnectId</a>.</p> 
       <h2>Aliran Migrasi Host</h2> 
       <ul> 
        <li><p>Login Sebuah host Game1, permainan dengan migrasi host diaktifkan</p></li> 
        <li> <p>Login B memulai klien dan bergabung Game1</p> 
         <ul> 
          <li>Login B diberitahu tentang peers (MachineA-0, dan diri (MachineB)</li> 
         </ul> </li> 
        <li> <p>Login C memulai klien dan bergabung Game1</p> 
         <ul> 
          <li>Login C diberitahukan tentang peers (MachineA-0, MachineB–1, dan diri (MachineC) -2)</li> 
         </ul> </li> 
        <li><p>Login Turunkan koneksi pada Game 1, jadi tuan rumah memutuskan</p></li> 
        <li> <p>Login B memutuskan dari host</p> 
         <ul> 
          <li><p>Login Fungsi callback B diinjak pada MigrationManager pada klien</p></li> 
          <li><p>Login B pemain GameObjects untuk semua pemain dinonaktifkan</p></li> 
          <li><p>Login B tinggal di tempat kejadian online</p></li> 
         </ul> </li> 
        <li> <p>Login B menggunakan fungsi utilitas untuk memilih host baru, memilih diri</p> 
         <ul> 
          <li><p>MesinB panggilan MenjadiNewHost()</p></li> 
          <li><p>Login B mulai mendengarkan</p></li> 
          <li><p>Login B pemain GameObject untuk diri diaktifkan</p></li> 
          <li><p>Login Pemain untuk MachineB sekarang kembali dalam permainan dengan semua keadaan lama</p></li> 
         </ul> </li> 
        <li> <p>Login C akan memutuskan dari host</p> 
         <ul> 
          <li><p>Login Fungsi callback C diinjak pada MigrationManager pada klien</p></li> 
          <li><p>Login C pemain GameObjects untuk semua pemain dinonaktifkan</p></li> 
          <li><p>Login C tinggal di tempat kejadian online</p></li> 
         </ul> </li> 
        <li> <p>Login C menggunakan fungsi utilitas untuk memilih host baru, mesin picks Login</p> 
         <ul> 
          <li>Login C terhubung kembali ke host baru</li> 
         </ul> </li> 
        <li> <p>Login B menerima koneksi dari MesinC</p> 
         <ul> 
          <li><p>Login C mengirim pesan rekoneksi dengan lamaConnection Id (dalam pesan AddPlayer)</p></li> 
          <li><p>fungsi callback diinvoked pada Migrasi Web server</p></li> 
          <li><p>Login B menggunakan oldConnection Id untuk menemukan pemain dinonaktifkan GameObject untuk pemain itu dan menambahkan kembali dengan ReconnectPlayerForConnection()</p></li> 
          <li><p>pemain GameObject adalah re-spawned untuk MachineC</p></li> 
          <li><p>Pemain untuk MesinC sekarang kembali dalam permainan dengan semua keadaan lama</p></li> 
         </ul> </li> 
        <li> <p>Login pulih (musim lama)</p> 
         <ul> 
          <li><p>Login Menggunakan fungsi utilitas untuk memilih host baru, memilih MachineB</p></li> 
          <li><p>MesinA "rekoneksi" ke MesinB</p></li> 
         </ul> </li> 
        <li><p>Login B menerima koneksi dari MachineA</p></li> 
        <li> <p>Login Kirim pesan rekoneksi dengan lamaConnection Login</p> 
         <ul> 
          <li><p>fungsi callback divoked pada MigrationManager pada server (MachineB)</p></li> 
          <li><p>Login B menggunakan oldConnection Id untuk menemukan pemain dinonaktifkan GameObject untuk pemain itu dan menambahkan kembali dengan ReconnectPlayerForConnection()</p></li> 
          <li><p>pemain GameObject adalah re-spawned untuk MachineA</p></li> 
          <li><p>Pemain untuk MachineA sekarang kembali dalam permainan dengan semua keadaan lamanya</p></li> 
         </ul> </li> 
       </ul> 
       <h2>Fungsi Callback</h2> 
       <p>Fungsi panggilan balik pada JaringanHostMigrasi Login</p> 
       <pre><code>
// called on client after the connection to host is lost. controls whether to switch Scenes
protected virtual void OnClientDisconnectedFromHost(
    NetworkConnection conn, 
    out SceneChangeOption sceneChange)

// called on host after the host is lost. host MUST change Scenes
protected virtual void OnServerHostShutdown()

// called on new host (server) when a client from the old host re-connects a player
protected virtual void OnServerReconnectPlayer(
    NetworkConnection newConnection, 
    GameObject oldPlayer, 
    int oldConnectionId, 
    short playerControllerId)

// called on new host (server) when a client from the old host re-connects a player
protected virtual void OnServerReconnectPlayer(
    NetworkConnection newConnection, 
    GameObject oldPlayer, 
    int oldConnectionId, 
    short playerControllerId, 
    NetworkReader extraMessageReader)

// called on new host (server) when a client from the old host re-connects a non-player GameObject
protected virtual void OnServerReconnectObject(
    NetworkConnection newConnection, 
    GameObject oldObject, 
    int oldConnectionId)

// called on both host and client when the set of peers is updated
protected virtual void OnPeersUpdated(
    PeerListMessage peers)

// utility function called by the default UI on client after connection to host was lost, to pick a new host.
public virtual bool FindNewHost(
    out NetworkSystem.PeerInfoMessage newHostInfo, 
    out bool youAreNewHost)

// called when the authority of a non-player GameObject changes
protected virtual void OnAuthorityUpdated(
    GameObject go,
    int connectionId,
    bool authorityState)
</code></pre> 
       <h2>Constraints</h2> 
       <p>Untuk migrasi host untuk bekerja dengan benar, Anda perlu pergi ke komponen <span class="tooltip"><strong>Network Manager</strong><span class="tooltiptext">Komponen Jaringan yang mengelola state jaringan proyek. <a class="tooltipMoreInfoLink" href="UNetManager.html">More info</a><br><span class="tooltipGlossaryLink">Lihat di <a href="Glossary.html#NetworkManager">Glossary</a></span></span></span> GameObject dan mengaktifkan <strong>Auto Create Player</strong>. Data yang hanya hadir di server (host) hilang ketika pemutusan host. Untuk permainan dapat melakukan migrasi host dengan benar, data penting harus didistribusikan ke klien, tidak memegang secara rahasia di server.</p> 
       <p>Ini bekerja untuk permainan koneksi langsung. Pekerjaan tambahan diperlukan untuk ini untuk berfungsi dengan server matchmaker dan relay.</p> 
       <!-- area:cloud --> 
       <div id="_content"></div> 
       <div class="nextprev clear"> 
        <div class="icon tt left mr1" data-distance="-40|-30|top"> 
         <span class="prev"><a href="UNetClientServer.html"></a></span> 
         <div class="tip">
           Klien dan server jaringan 
         </div> 
        </div> 
        <div class="icon tt right" data-distance="-40|-30|top"> 
         <span class="next"><a href="UNetDiscovery.html"></a></span> 
         <div class="tip">
           Jaringan Discovery 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="footer-wrapper"> 
       <div class="footer clear"> 
        <div class="copy"> 
        </div> 
        <div class="menu"> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div>  
 </body>
</html>